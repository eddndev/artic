# Artic Manifest v3
### Un Lenguaje para el Desarrollo Web del Futuro

---

## üéØ Visi√≥n

**Artic** (`.atc`) es un lenguaje de dominio espec√≠fico (DSL) dise√±ado para **eliminar la fragmentaci√≥n** en el desarrollo web full-stack. Nuestra misi√≥n es unificar la experiencia del desarrollador bajo un solo lenguaje, una sola sintaxis y una sola cadena de herramientas, mientras alcanzamos **rendimiento nativo** en todos los targets de compilaci√≥n.

### El Problema Actual

El desarrollo web moderno obliga a los desarrolladores a dominar m√∫ltiples lenguajes, paradigmas y herramientas:

- **Backend:** Node.js, Python, PHP, Go, Rust
- **Frontend:** JavaScript, TypeScript, JSX/TSX
- **Estilos:** CSS, SCSS, Tailwind, CSS-in-JS
- **Tooling:** webpack, Vite, esbuild, tsc, babel
- **Runtime:** Int√©rpretes pesados, node_modules gigantes, cold starts

Esta fragmentaci√≥n tiene costos:
- **Cambio de contexto mental** constante
- **Duplicaci√≥n de l√≥gica** entre frontend y backend
- **Performance overhead** de int√©rpretes y bundlers
- **Experiencia de desarrollador (DX)** inconsistente

### Nuestra Soluci√≥n

**Un lenguaje. Una sintaxis. Dos targets.**

Artic compila un solo archivo fuente (`.atc`) a:

1. **Binario nativo de servidor** (C++ compilado) ‚Üí Zero cold start, m√°ximo throughput
2. **JavaScript/WebAssembly optimizado** (para el cliente) ‚Üí Hydration r√°pida, l√≥gica en Wasm cuando sea necesario

---

## üíé Principios Fundamentales

### 1. **Sintaxis Unificada**
Una sola gram√°tica para todo: l√≥gica de servidor, l√≥gica de cliente, templates, estilos y tipos.

### 2. **Rendimiento Nativo**
El compilador genera c√≥digo de m√°quina real, no interpretado.

- **Backend:** Binario C++ compilado con GCC/Clang
- **Frontend:** JavaScript minimalista + Wasm para computaci√≥n intensiva
- **Estilos:** CSS est√°tico generado en tiempo de compilaci√≥n

### 3. **Zero Runtime Dependencies**
No m√°s `node_modules`, `vendor/`, ni int√©rpretes. El deploy de un backend Artic es un solo archivo binario.

### 4. **Developer Experience First**
Tooling de primera clase escrito en C++:

- **Compilador (`artic`):** Compilation times < 100ms
- **Language Server (LSP):** Autocompletado, navegaci√≥n, refactoring
- **Dev Server:** Hot reload con latencia < 50ms

### 5. **Expl√≠cito sobre Impl√≠cito**
Los decoradores `@server`, `@client`, `@utility` dejan claro d√≥nde se ejecuta cada pieza de c√≥digo.

### 6. **Declarativo y Centrado en el Compilador**
El archivo `.atc` es una declaraci√≥n pura que el compilador transforma. No hay runtime m√°gico, solo transformaciones deterministas.

---

## üìê Definici√≥n de Sintaxis Formal

### Regla de Oro: `:` vs `=`

La distinci√≥n m√°s importante en Artic:

> **`:` = Directiva del Compilador** (procesamiento especial)  
> **`=` = Asignaci√≥n de Valor** (pasa el valor tal cual)

```artic
// ‚úÖ Directivas del compilador (usan :)
class:(px:4 bg:blue-500)      // Procesa utilidades y genera CSS
on:click={handler}             // Genera addEventListener
bind:value={text}              // Genera two-way binding
slot:header                    // Routing de contenido

// ‚úÖ Atributos HTML y props (usan =)
src="logo.png"                 // Atributo HTML est√°tico
href={profileUrl}              // Atributo HTML din√°mico
title={props.label}            // Prop de componente
disabled={isLoading}           // Atributo booleano
```

---

## üìÇ Estructura Can√≥nica del Fichero

Un fichero `.atc` **ES** el componente. El parser procesa el archivo de forma determinista, esperando estos bloques **en orden estricto**:

```artic
// 1Ô∏è‚É£ METADATA (Opcional)
@route("/path")
@layout("layout-name")

// 2Ô∏è‚É£ IMPORTS (Opcional)
use theme "./theme.atc"
use { Component } from "./components"

// 3Ô∏è‚É£ PROPS (Opcional, solo en componentes)
props {
    title: string,
    count?: number = 0
}

// 4Ô∏è‚É£ LOGIC (Opcional)
let state = $state(0)

@server
let fetchData = async () => { /* ... */ }

@client
let handleClick = () => { /* ... */ }

// 5Ô∏è‚É£ STYLES (Opcional)
@utility
btn {
    px:4 py:2 rounded:md
}

// 6Ô∏è‚É£ TEMPLATE (Requerido - DEBE SER EL √öLTIMO)
<div class:(container)>
    {/* Contenido */}
</div>
```

---

## 1Ô∏è‚É£ Metadata: Decoradores de Fichero

Define **qu√© es** este componente.

### `@route(path: string)`

Define el fichero como una **P√°gina** (en lugar de un componente reutilizable).

```artic
@route("/dashboard")                    // Ruta est√°tica
@route("/blog/:slug")                   // Par√°metros de ruta
@route("/users/:id/posts/:postId")     // M√∫ltiples par√°metros
```

**Comportamiento:**
- Los par√°metros de ruta se inyectan autom√°ticamente en `props`
- Solo p√°ginas (con `@route`) se registran en el router del servidor
- Componentes sin `@route` son reutilizables

### `@layout(name: string)`

Envuelve la p√°gina con un componente de layout.

```artic
@route("/admin/users")
@layout("admin")  // Usa _layouts/admin.atc
```

El layout debe contener un `<slot />` donde se inyectar√° el contenido de la p√°gina.

---

## 2Ô∏è‚É£ Imports: Sistema `use`

### Importar Tema Global

```artic
use theme "./theme.atc"
```

Importa todas las utilidades exportadas del tema.

### Importar Componentes y Utilidades

```artic
// Componentes
use { Card, Button } from "./components"

// Utilidades de estilo
use { container, btn_primary } from "./theme"

// Mixto
use { Card, container } from "./ui"
```

### Importar APIs/M√≥dulos

```artic
use api from "./api"
use db from "./database"
use { validateEmail } from "./validators"
```

---

## 3Ô∏è‚É£ Props: API del Componente

Define la interfaz p√∫blica de un componente **reutilizable** (sin `@route`).

```artic
props {
    // Requerido con tipo
    title: string,
    
    // Con valor por defecto
    variant: "primary" | "secondary" = "primary",
    
    // Opcional
    onClick?: () => void,
    
    // Tipos complejos
    user: {
        id: string,
        name: string,
        email: string
    },
    
    // Arrays
    items: string[],
    tags: Array<string>,
    
    // Funciones callback
    onSave: (data: any) => void,
    onDelete: (id: string) => Promise<void>,
    
    // Union types
    status: "loading" | "success" | "error",
    
    // Any para casos especiales
    metadata?: any
}
```

**Notas Importantes:**
- Los componentes con `@route` reciben `props` autom√°ticamente desde los par√°metros de ruta
- La composici√≥n de UI se hace con `<slot />`, NO con props
- Las p√°ginas (con `@route`) NO deben declarar un bloque `props` expl√≠cito

---

## 4Ô∏è‚É£ Logic: El Script del Componente

### Declaraci√≥n de Variables

```artic
// let = mutable
let count = 0
let name = "Eduardo"

// const = inmutable
const MAX_ITEMS = 100
const API_URL = "https://api.example.com"
```

### Estado Reactivo

```artic
// Syntax sugar con $
let count = $state(0)
let user = $state({ name: "", email: "" })
let items = $state([])

// Valores derivados
let doubled = $derived(count * 2)
let hasItems = $derived(items.length > 0)

// El compilador reescribe asignaciones para disparar reactividad
count++              // Dispara actualizaciones
user.name = "Juan"   // Dispara actualizaciones
items.push(newItem)  // Dispara actualizaciones
```

### Contexto de Servidor

```artic
@server
let loadUsers = async () => {
    // Este c√≥digo SOLO existe en el binario de servidor
    // Acceso completo a: db, filesystem, env vars
    let users = await db.users.findMany()
    return users
}

@server
let deleteUser = async (id: string) => {
    await db.users.delete(id)
    return { success: true }
}

@server
let getCurrentTime = () => {
    // Funciones s√≠ncronas tambi√©n son v√°lidas
    return new Date().toISOString()
}
```

### Contexto de Cliente

```artic
@client
let handleClick = () => {
    // Este c√≥digo SOLO existe en el bundle JS del cliente
    // Acceso a: DOM, localStorage, window
    console.log("Clicked!")
}

@client
let trackEvent = (name: string, data?: any) => {
    // Analytics, tracking, etc.
    window.analytics?.track(name, data)
}

@client
let saveToLocalStorage = (key: string, value: any) => {
    localStorage.setItem(key, JSON.stringify(value))
}
```

### Llamadas Cross-Boundary (RPC Autom√°tico)

El compilador genera autom√°ticamente endpoints HTTP y llamadas fetch.

```artic
@server
let fetchData = async (filter: string) => {
    return await db.items.findMany({ filter })
}

@client
let refreshUI = async () => {
    // ‚ú® Magia: El compilador genera:
    // 1. POST /api/__rpc/fetchData en el servidor
    // 2. fetch() call en el cliente
    // 3. Serializaci√≥n/deserializaci√≥n autom√°tica
    
    let result = await fetchData("active")
    items = result
}
```

### Funciones Compartidas

Sin decorador = disponible en ambos lados.

```artic
// Esta funci√≥n existe en servidor Y cliente
let formatDate = (date: Date) => {
    return date.toLocaleDateString("es-MX")
}

let validateEmail = (email: string) => {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)
}

// El compilador incluye estas funciones en ambos targets
```

### Efectos y Ciclo de Vida

```artic
// Effect de mounting (se ejecuta una vez)
@effect
onMount() {
    console.log("Component mounted")
    loadInitialData()
}

// Effect reactivo (se ejecuta cuando cambian dependencias)
@effect
logCount() {
    console.log(`Count changed: ${count}`)
    // El compilador detecta que depende de 'count'
}

// Effect con dependencias m√∫ltiples
@effect
syncData() {
    if (user && token) {
        api.sync(user.id, token)
    }
    // Depende de 'user' y 'token'
}

// Effect con cleanup
@effect
setupTimer() {
    let timerId = setInterval(() => {
        count++
    }, 1000)
    
    // Cleanup autom√°tico cuando el componente se desmonta
    return () => {
        clearInterval(timerId)
    }
}
```

---

## 5Ô∏è‚É£ Styles: Sistema de Utilidades Unificado

Un lenguaje de tokens **tipo Tailwind**, tanto para definir como para consumir.

### Utilidades Est√°ticas

```artic
@utility
btn {
    px:4 py:2
    rounded:md
    font:semibold
    cursor:pointer
    transition:all
}

@utility
card {
    bg:white
    rounded:lg
    shadow:md
    p:6
}
```

### Composici√≥n de Utilidades

```artic
@utility
btn_primary {
    btn                  // ‚úÖ Compone otra utilidad
    bg:blue-600
    text:white
    hover:bg:blue-700
}

@utility
card_interactive {
    card                 // Compone 'card'
    hover:shadow:xl
    hover:scale:105
    transition:transform
}
```

### Estados y Pseudo-clases

```artic
@utility
link {
    text:blue-600
    hover:text:blue-800    // :hover
    hover:underline
    active:text:blue-900   // :active
    visited:text:purple-600 // :visited
}

@utility
input {
    border border:gray-300
    focus:outline:none     // :focus
    focus:ring:2
    focus:ring:blue-500
    disabled:bg:gray-100   // :disabled
    disabled:cursor:not-allowed
}
```

### Responsive Breakpoints

```artic
@utility
grid {
    grid gap:4
    grid-cols:1          // Mobile por defecto
    sm:grid-cols:2       // ‚â•640px
    md:grid-cols:3       // ‚â•768px
    lg:grid-cols:4       // ‚â•1024px
    xl:grid-cols:6       // ‚â•1280px
}

@utility
text_responsive {
    text:base            // Mobile
    md:text:lg           // Tablet
    lg:text:xl           // Desktop
}
```

### Dark Mode

```artic
@utility
themed {
    bg:white text:gray-900
    dark:bg:gray-900 dark:text:white
    border border:gray-200
    dark:border:gray-700
}

@utility
card_themed {
    bg:white
    dark:bg:gray-800
    text:gray-900
    dark:text:gray-100
}
```

### Macros en Compile-Time

```artic
// Funci√≥n que retorna string de utilidades
@utility
spacing(size: number) {
    return `p:${size * 4} m:${size * 2}`
}

// Uso: class:(spacing(2))
// Genera: p:8 m:4

@utility
colorScheme(color: string, intensity: number) {
    return `bg:${color}-${intensity} text:${color}-${intensity + 400}`
}

// Uso: class:(colorScheme("blue", 500))
// Genera: bg:blue-500 text:blue-900
```

### Exportar Utilidades

```artic
// En theme.atc
@utility
container { 
    w:full max-w:7xl mx:auto px:4 
}

@utility
btn_primary { 
    px:4 py:2 bg:blue-600 text:white 
}

// Exportar para uso en otros archivos
export { container, btn_primary }
```

---

## 6Ô∏è‚É£ Template: Sintaxis de Plantilla

La estructura de UI. **Debe ser el √∫ltimo bloque del fichero.**

### Elementos y Expresiones

```artic
// HTML nativo
<div class:(container)>
    <h1>Hello World</h1>
</div>

// Componentes custom
<Card title="My Card">
    <p>Content</p>
</Card>

// Expresiones JavaScript
<p>{count}</p>
<p>{count * 2}</p>
<p>{user.name.toUpperCase()}</p>
<p>{formatDate(new Date())}</p>

// Expresiones complejas
<p>{items.filter(i => i.active).length} items activos</p>
```

### Atributos HTML (con `=`)

```artic
// Atributos est√°ticos
<img src="logo.png" alt="Logo" />
<a href="/about">About</a>

// Atributos din√°micos
<img src={logoUrl} alt={logoAlt} />
<a href={`/users/${user.id}`}>Profile</a>

// Atributos booleanos
<button disabled={isLoading}>Submit</button>
<input checked={isChecked} />
<details open={isExpanded} />

// Atributos condicionales
<div 
    id={elementId}
    title={hasTooltip ? tooltipText : undefined}
    data-active={isActive}
>
```

### Props de Componentes (con `=`)

```artic
// Props simples
<Card title="Hello" />
<Button variant="primary" />

// Props din√°micos
<Card title={pageTitle} />
<Button variant={buttonVariant} />

// Props de funciones
<Button onClick={handleClick} />
<Form onSubmit={handleSubmit} />

// Props de objetos
<UserCard user={currentUser} />
<DataGrid 
    columns={columnDefs}
    data={items}
    config={{ sortable: true, paginated: false }}
/>

// Spread props
<Card {...cardProps} />
<Button {...buttonProps} className="extra" />
```

### Directiva `class:` (con `:`)

```artic
// Utilidades inline
<div class:(px:4 py:2 bg:white rounded:lg)>

// Utilidades locales
<div class:(btn_primary)>

// Condicional con expresiones JS
<div class:(base {isActive ? "active" : "inactive"})>

// Din√°mico con interpolaci√≥n
<div class:(bg:{color}-500 text:{size})>

// Todo mezclado
<div class:(
    px:4 rounded:lg
    {isActive ? "bg:blue-500" : "bg:gray-300"}
    {isLarge ? "text:2xl" : "text:base"}
    hover:shadow:xl
    dark:bg:gray-800
)>
```

### Eventos (con `:`)

```artic
// Evento b√°sico
<button on:click={handleClick}>Click</button>

// Funci√≥n inline
<button on:click={() => count++}>Increment</button>

// Con par√°metros
<button on:click={(e) => handleClick(e, itemId)}>
    Delete
</button>

// M√∫ltiples eventos
<input 
    on:input={handleInput}
    on:focus={handleFocus}
    on:blur={handleBlur}
/>
```

### Modificadores de Eventos (con `|`)

```artic
// preventDefault
<form on:submit|preventDefault={handleSubmit}>

// stopPropagation
<button on:click|stopPropagation={handleClick}>

// M√∫ltiples modificadores (se encadenan)
<input 
    on:keydown|enter|preventDefault={handleEnter}
    on:keydown|escape={handleEscape}
/>

// Modificadores disponibles:
// - preventDefault: llama event.preventDefault()
// - stopPropagation: llama event.stopPropagation()
// - self: solo dispara si event.target === currentTarget
// - once: solo se ejecuta una vez
// - capture: usa capture phase
// - passive: mejora scroll performance
```

### Modificadores de Tecla

```artic
<input 
    on:keydown|enter={submitForm}
    on:keydown|escape={closeModal}
    on:keydown|space={toggleSelection}
    on:keydown|ctrl|s={saveDocument}
/>

// Teclas disponibles:
// - enter, escape, space, tab
// - up, down, left, right
// - ctrl, shift, alt, meta
```

### Binding de Datos (con `:`)

```artic
// Input de texto
<input bind:value={searchQuery} />

// Textarea
<textarea bind:value={description} />

// Checkbox (individual)
<input type="checkbox" bind:checked={isAdmin} />

// Radio buttons (con bind:group)
<input type="radio" bind:group={selectedOption} value="a" />
<input type="radio" bind:group={selectedOption} value="b" />
<input type="radio" bind:group={selectedOption} value="c" />

// Select
<select bind:value={selectedCity}>
    <option value="cdmx">Ciudad de M√©xico</option>
    <option value="gdl">Guadalajara</option>
    <option value="mty">Monterrey</option>
</select>

// Select m√∫ltiple
<select multiple bind:value={selectedItems}>
    <option value="a">Opci√≥n A</option>
    <option value="b">Opci√≥n B</option>
</select>

// Checkboxes m√∫ltiples (bind:group)
let selected = $state([])

<input type="checkbox" bind:group={selected} value="red" />
<input type="checkbox" bind:group={selected} value="blue" />
<input type="checkbox" bind:group={selected} value="green" />
```

### Composici√≥n con Slots (con `:`)

Los slots permiten inyectar contenido en componentes.

**Componente que define slots:**

```artic
// Card.atc
props { title: string }

<article class:(card)>
    <header class:(card-header)>
        <h2>{props.title}</h2>
        <slot:actions />  {/* Slot nombrado */}
    </header>
    
    <div class:(card-body)>
        <slot />  {/* Slot por defecto */}
    </div>
    
    <footer class:(card-footer)>
        <slot:footer />  {/* Slot nombrado */}
    </footer>
</article>
```

**Uso del componente:**

```artic
<Card title="Mi Tarjeta">
    {/* Contenido del slot por defecto */}
    <p>Este es el contenido principal</p>
    <p>Puede tener m√∫ltiples elementos</p>
    
    {/* Slot nombrado con directiva slot: */}
    <button slot:actions class:(btn)>
        Editar
    </button>
    
    {/* Otro slot nombrado */}
    <div slot:footer>
        <span>Actualizado hace 2h</span>
    </div>
</Card>
```

**Slots con fallback:**

```artic
// El contenido dentro de <slot:nombre> es el fallback
<div class:(card)>
    <slot:header>
        {/* Este contenido se muestra si no se provee slot:header */}
        <h2>T√≠tulo por defecto</h2>
    </slot:header>
    
    <slot>
        {/* Contenido por defecto del slot principal */}
        <p>Sin contenido</p>
    </slot>
</div>
```

### Control de Flujo (JavaScript Nativo)

Artic NO tiene sintaxis especial de template. Usa JavaScript puro.

**Condicionales:**

```artic
// Ternario b√°sico
{loading ? <Spinner /> : <DataGrid data={items} />}

// Cortocircuito (&&)
{error && <ErrorAlert message={error} />}
{user && <Welcome name={user.name} />}

// Negaci√≥n (!!)
{!isLoading && <Content />}

// Condicionales m√∫ltiples
{
    status === "loading" ? <Spinner /> :
    status === "error" ? <Error message={errorMsg} /> :
    status === "empty" ? <EmptyState /> :
    <DataGrid data={items} />
}

// If-else en variables
let content = loading ? <Spinner /> : <Content />

<div class:(container)>
    {content}
</div>
```

**Bucles:**

```artic
// map() b√°sico
{items.map(item => (
    <li key={item.id}>
        {item.name}
    </li>
))}

// map() con componentes
{users.map(user => (
    <UserCard key={user.id} user={user} />
))}

// map() con destructuring
{posts.map(({ id, title, author }) => (
    <article key={id}>
        <h2>{title}</h2>
        <p>By {author}</p>
    </article>
))}

// filter() + map()
{posts
    .filter(p => p.published)
    .map(post => (
        <PostCard key={post.id} post={post} />
    ))
}

// map() con index
{items.map((item, index) => (
    <div key={item.id}>
        {index + 1}. {item.name}
    </div>
))}
```

**‚ö†Ô∏è IMPORTANTE:** Siempre usa `key={uniqueId}` en elementos repetidos.

---

## üöÄ Ejemplo Completo: Mini Blog

### `theme.atc` - Tema Global

```artic
// src/theme.atc

@utility
container {
    w:full
    max-w:4xl
    mx:auto
    px:4
}

@utility
btn {
    px:4 py:2
    rounded:md
    font:semibold
    cursor:pointer
    transition:all
}

@utility
btn_primary {
    btn
    bg:blue-600
    text:white
    hover:bg:blue-700
    active:scale:95
}

@utility
btn_secondary {
    btn
    bg:gray-200
    text:gray-900
    hover:bg:gray-300
}

@utility
input_base {
    w:full
    px:3 py:2
    border border:gray-300
    rounded:md
    focus:outline:none
    focus:ring:2
    focus:ring:blue-500
}

export { container, btn_primary, btn_secondary, input_base }
```

### `Card.atc` - Componente Reutilizable

```artic
// src/components/Card.atc

props {
    title: string
}

@utility
card {
    bg:white
    rounded:lg
    shadow:md
    overflow:hidden
    dark:bg:gray-800
}

@utility
header {
    p:4
    border-b border:gray-200
    dark:border:gray-700
}

@utility
body {
    p:4
}

@utility
footer {
    p:4
    bg:gray-50
    dark:bg:gray-900
}

<article class:(card)>
    <header class:(header)>
        <h2 class:(font:bold text:lg)>
            {props.title}
        </h2>
    </header>
    
    <div class:(body)>
        <slot />
    </div>
    
    <footer class:(footer)>
        <slot:footer />
    </footer>
</article>
```

### `Blog.atc` - P√°gina Principal

```artic
// src/pages/Blog.atc

@route("/blog")

use theme "../theme.atc"
use { Card } from "../components/Card"

let posts = $state([])
let query = $state("")
let loading = $state(true)

@server
let loadPosts = async (search: string) => {
    let allPosts = await db.posts.findMany()
    
    if (!search) return allPosts
    
    return allPosts.filter(p => 
        p.title.toLowerCase().includes(search.toLowerCase())
    )
}

@client
let handleClear = () => {
    query = ""
}

@effect
searchPosts() {
    loading = true
    loadPosts(query).then(data => {
        posts = data
        loading = false
    })
}

<div class:(container py:8)>
    <h1 class:(text:3xl font:bold mb:6)>
        Blog de Artic
    </h1>
    
    <div class:(flex gap:2 mb:6)>
        <input 
            class:(input_base)
            placeholder="Buscar posts..."
            bind:value={query}
        />
        <button 
            class:(btn_secondary)
            on:click={handleClear}>
            Limpiar
        </button>
    </div>
    
    {loading ? (
        <div class:(text:center py:8)>
            <p>Cargando...</p>
        </div>
    ) : posts.length === 0 ? (
        <div class:(text:center py:8)>
            <p>No se encontraron posts</p>
        </div>
    ) : (
        <div class:(grid gap:4)>
            {posts.map(post => (
                <Card key={post.id} title={post.title}>
                    <p class:(text:gray-700)>
                        {post.excerpt}
                    </p>
                    
                    <a 
                        href={`/blog/${post.slug}`}
                        slot:footer
                        class:(text:blue-600 hover:underline)>
                        Leer m√°s ‚Üí
                    </a>
                </Card>
            ))}
        </div>
    )}
</div>
```

---

## üó∫Ô∏è Roadmap de Implementaci√≥n

### Fase 1: Generador Est√°tico (SSG)
**Objetivo:** Compilar `.atc` ‚Üí HTML + CSS est√°ticos

**Tareas:**
- [ ] Definir gram√°tica completa (EBNF)
- [ ] Implementar Lexer (Tokenizaci√≥n)
- [ ] Implementar Parser (AST)
- [ ] HtmlGenerator (JSX ‚Üí HTML)
- [ ] CssGenerator (utilidades ‚Üí CSS)
- [ ] CLI b√°sico: `artic build`

**Entregable:** Landing pages est√°ticas ultrarr√°pidas

### Fase 2: Reactividad (Cliente Interactivo)
**Objetivo:** A√±adir JavaScript e interactividad

**Tareas:**
- [ ] Extender gram√°tica (eventos, estado, effects)
- [ ] ClientScriptGenerator (Artic ‚Üí JS)
- [ ] Runtime de hydration (`runtime.js`)
- [ ] Sistema de reactividad (signals)
- [ ] Event handlers y modificadores
- [ ] Two-way binding

**Entregable:** Apps web interactivas

### Fase 3: Servidor Nativo
**Objetivo:** Backend en binario C++

**Tareas:**
- [ ] ServerBinaryGenerator (Artic ‚Üí C++)
- [ ] Runtime de servidor (HTTP server en C++)
- [ ] Sistema de routing
- [ ] RPC autom√°tico (cliente ‚Üî servidor)
- [ ] Manejo de requests/responses
- [ ] Integraci√≥n con librer√≠as HTTP (Boost.Asio/oatpp)

**Entregable:** Full-stack app con servidor nativo

### Fase 4: Capa de Datos (ORM)
**Objetivo:** Abstraer acceso a bases de datos

**Tareas:**
- [ ] Definir sintaxis de ORM
- [ ] Query builder type-safe
- [ ] Generador de SQL
- [ ] Integraci√≥n con PostgreSQL/MySQL
- [ ] Migraciones declarativas
- [ ] Relaciones y joins

**Entregable:** ORM integrado y type-safe

### Fase 5: Tooling Avanzado
**Objetivo:** DX de primera clase

**Tareas:**
- [ ] Language Server Protocol (LSP)
- [ ] Autocompletado inteligente
- [ ] Navegaci√≥n de c√≥digo
- [ ] Refactoring autom√°tico
- [ ] Linting y formatting
- [ ] Dev server con HMR
- [ ] Plugin de VS Code

**Entregable:** Tooling comparable a TypeScript

### Fase 6: WebAssembly
**Objetivo:** Performance extremo en cliente

**Tareas:**
- [ ] Compilador Artic ‚Üí C++ ‚Üí Wasm
- [ ] Bridge JS ‚Üî Wasm
- [ ] Optimizaciones de bundle size
- [ ] Threading (Web Workers)
- [ ] SIMD optimizations

**Entregable:** Computaci√≥n pesada en Wasm

---

## üõ†Ô∏è Stack Tecnol√≥gico

### Compilador (`artic`)
- **Lenguaje:** C++20
- **Parser:** Recursive Descent (manual)
- **AST:** Estructura custom optimizada
- **Backends:** 
  - ServerBinaryGenerator (C++)
  - ClientScriptGenerator (JS)
  - CssGenerator (CSS)
- **Build System:** CMake
- **Testing:** Google Test

### Runtime de Servidor
- **Lenguaje:** C++20
- **HTTP:** Boost.Asio / oatpp / drogon
- **Event Loop:** As√≠ncrono
- **Output:** Binario est√°tico
- **Tama√±o:** ~2-5 MB (con todas las libs)

### Runtime de Cliente
- **Core:** `runtime.js` (~5-8KB gzipped)
- **Reactivity:** Fine-grained signals
- **Hydration:** Virtual DOM minimal
- **Wasm Bridge:** JS ‚Üî WebAssembly

### Tooling
- **LSP:** C++ (reutiliza parser)
- **Dev Server:** C++ con WebSocket
- **CLI:** `artic` (build, dev, create)
- **Package Manager:** Compatible con npm

---

## üéØ Comparaci√≥n con Alternativas

| Feature | **Artic** | Next.js | SvelteKit | Solid.js | Go+HTMX |
|---------|-----------|---------|-----------|----------|---------|
| **Lenguaje** | Uno (.atc) | JS+TS+JSX+CSS | JS+Svelte+CSS | JS+JSX+CSS | 2 lenguajes |
| **Backend** | Binario C++ | Node.js | Node.js | Node.js | Binario Go |
| **Cold Start** | ~1ms | ~100ms | ~100ms | ~100ms | ~2ms |
| **Sintaxis** | Una | M√∫ltiples | Dos | Dos | Dos |
| **Reactividad** | Signals | React Hooks | Stores | Signals | Ninguna |
| **Estilos** | Integrados | Separados | Separados | Separados | Separados |
| **Deploy** | 1 binario | Node + deps | Node + deps | Node + deps | 1 binario |
| **Bundle** | ~10KB | ~80KB | ~30KB | ~20KB | ~5KB |
| **Type Safety** | Nativo | TypeScript | TypeScript | TypeScript | Opcional |
| **LSP** | Nativo | TS Server | Svelte LSP | TS Server | Go+TS |

---

## üîç An√°lisis Exhaustivo de Lagunas

### üî¥ Cr√≠ticas (Fase 1-3) - Bloquean MVP

#### 1. Sistema de Tipos Completo
**Estado:** ‚ùå No definido

```artic
// Necesitamos definir:
type User = {
    id: string,
    name: string,
    role: "admin" | "user"
}

interface Pageable {
    page: number,
    pageSize: number
}

// Generics
type Result<T> = {
    data: T,
    error?: string
}

// Type guards
let isUser = (obj: any): obj is User => {
    return obj && typeof obj.id === "string"
}
```

**Prioridad:** üî• ALTA

#### 2. Manejo de Errores
**Estado:** ‚ùå No definido

```artic
// Try-catch en funciones
@server
let riskyOperation = async () => {
    try {
        return await db.query()
    } catch (error) {
        return { error: error.message }
    }
}

// Error boundaries en templates
<ErrorBoundary fallback={<ErrorPage />}>
    <RiskyComponent />
</ErrorBoundary>

// P√°ginas de error
// ¬øC√≥mo se definen 404.atc, 500.atc?
```

**Prioridad:** üî• ALTA

#### 3. Routing Avanzado
**Estado:** ‚ö†Ô∏è Parcial (solo rutas simples)

```artic
// Nested routes
@route("/dashboard")
// ¬øC√≥mo se anidan /dashboard/users y /dashboard/settings?

// Route guards
@route("/admin")
@guard("requireAuth")  // ¬øSintaxis?
@guard((req) => req.user?.isAdmin)

// Redirects
@route("/old-path")
@redirect("/new-path")

// Catch-all routes
@route("/docs/*")  // Captura /docs/anything/here

// Query parameters
// ¬øC√≥mo se accede a ?search=foo&page=2?
```

**Prioridad:** üî• ALTA

#### 4. SEO y Meta Tags
**Estado:** ‚ùå No definido

```artic
// ¬øC√≥mo se define el <head>?
@route("/blog/:slug")
@meta({
    title: "Blog Post",
    description: "...",
    ogImage: "/og.png"
})

// O dentro del template?
<Head>
    <title>{post.title}</title>
    <meta name="description" content={post.excerpt} />
</Head>
```

**Prioridad:** üî• ALTA

#### 5. Environment Variables
**Estado:** ‚ùå No definido

```artic
// ¬øC√≥mo se accede a env vars?
const API_KEY = process.env.API_KEY
const DB_URL = env.DATABASE_URL

// Build-time vs Runtime
const STATIC_VAR = env.PUBLIC_URL  // Compile-time
const DYNAMIC_VAR = env.USER_TOKEN // Runtime (solo servidor)
```

**Prioridad:** üî• ALTA

#### 6. Comentarios en el C√≥digo
**Estado:** ‚ùå No especificado

```artic
// ¬øComentarios de l√≠nea?
/* Comentarios de bloque? */
{/* JSX comments? */}

// ¬øJSDoc para documentaci√≥n?
/**
 * Loads user data
 * @param id User ID
 * @returns User object
 */
@server
let loadUser = async (id: string) => { ... }
```

**Prioridad:** üü° MEDIA

### üü° Importantes (Fase 4-5) - Mejoran DX

#### 7. Formularios y Validaci√≥n
**Estado:** ‚ùå No definido

```artic
// Validaci√≥n declarativa
props {
    email: string @validate("email"),
    age: number @validate("min:18, max:100")
}

// Form state
let form = $form({
    email: "",
    password: ""
})

// Validaciones custom
let validatePassword = (pwd: string) => {
    return pwd.length >= 8
}
```

**Prioridad:** üü° MEDIA

#### 8. Referencias al DOM
**Estado:** ‚ùå No definido

```artic
// ¬øSintaxis de refs?
let inputRef = $ref()

@client
let focusInput = () => {
    inputRef.current?.focus()
}

<input ref={inputRef} />
```

**Prioridad:** üü° MEDIA

#### 9. Context/Dependency Injection
**Estado:** ‚ùå No definido

```artic
// Provider de contexto global
@provide("theme", { mode: "dark" })

// Consumer
@inject("theme")
let theme = useContext("theme")
```

**Prioridad:** üü° MEDIA

#### 10. Assets Est√°ticos
**Estado:** ‚ùå No definido

```artic
// ¬øC√≥mo se importan im√°genes?
use logo from "./assets/logo.png"
use styles from "./assets/main.css"

<img src={logo} />

// ¬øOptimizaci√≥n autom√°tica?
// ¬øCDN integration?
```

**Prioridad:** üü° MEDIA

#### 11. Scope de Variables
**Estado:** ‚ö†Ô∏è Ambiguo

```artic
// ¬øLas variables en Logic son globales al archivo?
let count = 0  // ¬øScope de archivo?

@server
let data = []  // ¬øSolo existe en servidor?

@client
let localVar = 0  // ¬øSolo en cliente?

// ¬øQu√© pasa si uso 'count' en una funci√≥n @server?
```

**Prioridad:** üî• ALTA (aclaraci√≥n necesaria)

#### 12. Sintaxis JavaScript Moderna
**Estado:** ‚ö†Ô∏è No especificado qu√© soportamos

```artic
// ¬øSoportamos destructuring?
let { name, email } = user
let [first, ...rest] = items

// ¬øSpread operators?
let newUser = { ...user, age: 30 }

// ¬øOptional chaining?
let value = user?.address?.city

// ¬øNullish coalescing?
let name = user.name ?? "Anonymous"

// ¬øTemplate literals?
let msg = `Hello ${name}`

// ¬øArrow functions?
let double = (x) => x * 2

// ¬øAsync/await en @client?
@client
let fetchData = async () => {
    let res = await fetch("/api/data")
    return res.json()
}
```

**Prioridad:** üî• ALTA (especificar qu√© soportamos)

### üü¢ Deseables (Fase 6+) - Futuro

#### 13. Internacionalizaci√≥n (i18n)
```artic
use { t } from "./i18n"

<h1>{t("welcome")}</h1>
<p>{t("items_count", { count: items.length })}</p>
```

#### 14. Animaciones y Transiciones
```artic
<div transition:fade>...</div>
<div animate:slide>...</div>
```

#### 15. Testing
```artic
// Unit tests para funciones
test("suma correctamente", () => {
    expect(sum(2, 3)).toBe(5)
})

// Component tests
test("renderiza correctamente", () => {
    let { getByText } = render(<Button label="Click" />)
    expect(getByText("Click")).toBeInTheDocument()
})
```

#### 16. Portales
```artic
<Portal target="body">
    <Modal />
</Portal>
```

#### 17. WebSocket
```artic
@server
@websocket("/ws")
let handleConnection = (socket) => {
    socket.on("message", (data) => {
        socket.broadcast(data)
    })
}
```

#### 18. Middleware
```artic
@middleware
let authenticate = (req, res, next) => {
    if (!req.user) {
        return res.redirect("/login")
    }
    next()
}
```

---

## üéì Filosof√≠a de Dise√±o

### 1. Principio de Menor Sorpresa
La sintaxis debe ser predecible. Si aprendiste una parte de Artic, el resto se siente familiar.

### 2. Expl√≠cito > Impl√≠cito
Los decoradores hacen obvio qu√© c√≥digo va d√≥nde. No hay "magia negra".

### 3. Zero-Cost Abstractions
Las abstracciones de alto nivel no deben tener costo en runtime. El compilador optimiza todo.

### 4. Compilador como Aliado
El compilador no es un obst√°culo, es tu mejor herramienta. Errores claros, sugerencias √∫tiles, optimizaciones autom√°ticas.

### 5. JavaScript como Target, No como Dependencia
Artic compila A JavaScript, no depende DE JavaScript. No heredamos sus limitaciones.

### 6. Consistencia Sint√°ctica
`:` para directivas del compilador, `=` para valores. Sin excepciones.

---

## üöÄ Casos de Uso

### Landing Pages
```artic
@route("/")

<section class:(hero bg:gradient py:20 text:center)>
    <h1 class:(text:6xl font:extrabold)>
        Bienvenido a Artic
    </h1>
</section>
```

**Ventaja:** SSG puro, ~2KB de JS, perfecto Lighthouse score

### Dashboards
```artic
let data = $state([])

@effect
loadData() {
    api.getMetrics().then(d => data = d)
}

<Dashboard data={data} />
```

**Ventaja:** Reactividad fine-grained, actualizaciones quir√∫rgicas

### E-commerce
```artic
@route("/products/:id")

@server
let product = await db.products.findOne(props.id)

<ProductPage product={product} />
```

**Ventaja:** SSR nativo, SEO perfecto, < 10ms response

### APIs REST
```artic
@route("/api/users/:id")

@server
let handler = async (req) => {
    let user = await db.users.findOne(req.params.id)
    return { status: 200, body: user }
}
```

**Ventaja:** Binario autoejecutable, latencia m√≠nima

---

## üåü Misi√≥n

Hacer que el desarrollo web sea:

1. **M√°s r√°pido** (para desarrolladores y usuarios)
2. **M√°s simple** (una herramienta, no un ecosistema)
3. **M√°s poderoso** (rendimiento nativo sin complejidad)
4. **M√°s consistente** (una sintaxis para todo)

---

## üìú Licencia y Comunidad

- **Licencia:** MIT (open source desde el d√≠a 1)
- **Repositorio:** `github.com/achronyme/artic` (TBD)
- **Documentaci√≥n:** `artic-lang.org` (TBD)
- **Discord:** Comunidad en construcci√≥n

---

**Creado por Eduardo y la comunidad Achronyme**  
*Versi√≥n 3.0.0 - Octubre 2025*